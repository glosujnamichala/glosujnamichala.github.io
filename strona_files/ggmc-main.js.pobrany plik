$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})

var copystatus = 0;
if(document.location.pathname == '/') {
  $('#status .server-ip, #status .copy-ip p').click(function (event) {
    if(copystatus == 0) {
      copystatus = 1;
      var $temp = $('<input>');
      $('body').append($temp);
      $temp.val('ggmc.pl').select();
      document.execCommand('copy');
      $temp.remove();
  
      var adresip = $('#status .server-ip p');
      var adresiphtml = $('#status .server-ip p').html();
      adresip.html('<span style="color: inherit; font-weight: 300;">Skopiowano adres IP do schowka</span>');
      setTimeout(function() {
        adresip.html(adresiphtml);
        copystatus = 0;
      }, 2500); 
    }
  });
}

var scrollPosition = window.pageYOffset;
var navbarStatus = 1;
if(document.querySelector("header .navbar .nav-item.active") != null) {
  document.querySelector("header .navbar .nav-item.active").classList.add("active-animation");
}
/*document.querySelector("header .navbar-nav").addEventListener("transitionend", ()=> {
  if(navbarStatus == 1) {
    document.querySelector("header .navbar .nav-item.active").classList.add("active-animation");
  }
});*/

window.onresize = function() {
  if(document.querySelector("header .navbar .nav-item.active") != null) {
    if(window.innerWidth < 992) {
      document.querySelector("header .navbar .nav-item.active").classList.remove("active-animation");
    }
    else {
      document.querySelector("header .navbar .nav-item.active").classList.add("active-animation");
    }
  }
}


window.onscroll = function() {
var currentScrollPosition = window.pageYOffset;
  if(currentScrollPosition > 150) {
    if (scrollPosition > currentScrollPosition) {
      if(!document.querySelector(".navbar-collapse.collapse").classList.contains("show")) {
        navbarStatus = 1;
        document.querySelector("header .navbar").style.top = "0";
        //document.querySelector("header .navbar-nav").style.transition = "all 1.2s cubic-bezier(0.785, 0.135, 0.15, 0.86)";
        //document.querySelector("header .navbar-nav").style.transform = "translateY(0px)";
  
        if(document.location.pathname == '/regulamin') {
          document.querySelector(".regulamin-aside").style.transition = "all 0.6s cubic-bezier(0.785, 0.135, 0.15, 0.86)";
          document.querySelector(".regulamin-aside").style.top = "100px";
        }
      }
    } else {
      if(!document.querySelector(".navbar-collapse.collapse").classList.contains("show")) {
        navbarStatus = 0;
        document.querySelector("header .navbar").style.top = "-100px";
        //document.querySelector("header .navbar-nav").style.transition = "all 0.3s cubic-bezier(0.785, 0.135, 0.15, 0.86)";
        //document.querySelector("header .navbar-nav").style.transform = "translateY(-65px)";
        
        //document.querySelector("header .navbar .nav-item.active").classList.remove("active-animation");
  
        if(document.location.pathname == '/regulamin') {
          document.querySelector(".regulamin-aside").style.transition = "all 0.5s cubic-bezier(0.785, 0.135, 0.15, 0.86)";
          document.querySelector(".regulamin-aside").style.top = "20px";
        }
      }
    }
  }
  scrollPosition = currentScrollPosition;
}

if(document.location.pathname == '/regulamin') {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        let target = document.querySelector(this.getAttribute('href'));
  
        
        window.scrollTo({
            top: target.offsetTop + 90,
            behavior: 'smooth'
        });
    });
  });
}